<H2> Listing Product( <%= @products.count%> ) </H2>

<%if user_signed_in? && current_user.is_admin %>
<%=link_to("Add products",new_product_path)%>| 
<% end %>
<%=link_to("products",products_path)%> | <%= link_to("high-low", products_path(sort: "high-low"))%> | <%= link_to("low-high", products_path(sort: "low-high"))%>


<!--
<H3> Total Products</H3>
<iframe src='http://localhost:4848/single/?appid=C%3A%5CUsers%5Cram%5CDocuments%5CQlik%5CSense%5CApps%5CRubyApp.qvf&obj=pdcJ&opt=nointeraction&select=clearall' style='border:none;'></iframe>
<iframe src='http://localhost:4848/single/?appid=C%3A%5CUsers%5Cram%5CDocuments%5CQlik%5CSense%5CApps%5CRubyApp.qvf&obj=tjPCtLf&select=clearall' style='border:none;'></iframe>
<br>
-->


	
	<ul>
		<% @products.each do |product| %>
			<li> <% if product.product_image_url.nil? %>
					<%= image_tag("/default.jpg", size: "20x20") %>
				<% else %>
					<%= image_tag(product.product_image_url, size: "20x20") %>
				<% end %>


			 <%= link_to product.name, product_path(product)%> - (INR <%=product.price%>) - (<%= product.category.try(:name)%>) -
			
			<%#= product.get_category_name : This uses a method that we created in the Class%> 
			<%#= product.category.name : This uses associations but if a foreign key is null it will throw an error for nil::NilClass, which can be handled using try%>
			<!--  #here we can call the method like we have done in the show page. Show page is the preferred way to do it -->
			
			</li>



		<%end%>

	</ul>
		
	